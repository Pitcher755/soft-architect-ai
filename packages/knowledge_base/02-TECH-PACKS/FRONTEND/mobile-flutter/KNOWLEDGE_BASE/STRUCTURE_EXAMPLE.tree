# Directory Structure: SoftArchitect Flutter Frontend

## Feature-First Architecture + Riverpod 2.0

```
lib/
â”œâ”€â”€ ðŸ“„ main.dart                    # â­ Entry Point (ProviderScope wrapper)
â”‚
â”œâ”€â”€ ðŸ“„ app.dart                     # MaterialApp config (Router, Theme, debug banner)
â”‚
â”œâ”€â”€ ðŸ“ core/                        # ðŸ§  Shared & Global Configuration
â”‚   â”œâ”€â”€ __init.dart__
â”‚   â”œâ”€â”€ ðŸ“ config/                  # Environment configuration
â”‚   â”‚   â”œâ”€â”€ app_config.dart         # Env vars (API_URL, API_KEY, etc.)
â”‚   â”‚   â””â”€â”€ environment.dart        # Dev vs Prod configs
â”‚   â”‚
â”‚   â”œâ”€â”€ ðŸ“ theme/                   # Design System
â”‚   â”‚   â”œâ”€â”€ app_theme.dart          # Global theme (light/dark)
â”‚   â”‚   â”œâ”€â”€ colors.dart             # Color palette (const)
â”‚   â”‚   â”œâ”€â”€ text_styles.dart        # Typography (font families, sizes)
â”‚   â”‚   â””â”€â”€ dimensions.dart         # Spacing, border radius (const)
â”‚   â”‚
â”‚   â”œâ”€â”€ ðŸ“ router/                  # Navigation (GoRouter)
â”‚   â”‚   â”œâ”€â”€ app_router.dart         # GoRouter provider & route definitions
â”‚   â”‚   â””â”€â”€ routes.dart             # Route path constants
â”‚   â”‚
â”‚   â”œâ”€â”€ ðŸ“ utils/                   # Helper utilities
â”‚   â”‚   â”œâ”€â”€ validators.dart         # Email, password validators
â”‚   â”‚   â”œâ”€â”€ formatters.dart         # Date, currency formatters
â”‚   â”‚   â”œâ”€â”€ logger.dart             # Debug logging (no print!)
â”‚   â”‚   â””â”€â”€ extensions.dart         # String, BuildContext extensions
â”‚   â”‚
â”‚   â””â”€â”€ ðŸ“ exceptions/              # Domain exceptions
â”‚       â”œâ”€â”€ app_exception.dart      # Base exception class
â”‚       â””â”€â”€ error_handler.dart      # Map API errors to app errors
â”‚
â”œâ”€â”€ ðŸ“ features/                    # ðŸ—ï¸ Vertical Feature Slices (Modular)
â”‚   â”‚
â”‚   â”œâ”€â”€ ðŸ“ auth/                    # Feature: AutenticaciÃ³n
â”‚   â”‚   â”œâ”€â”€ ðŸ“ data/                # Data Layer
â”‚   â”‚   â”‚   â”œâ”€â”€ datasources/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth_remote_datasource.dart  # API calls
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth_local_datasource.dart   # Local storage (token)
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user_model.dart              # JSON-serializable
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth_response_model.dart
â”‚   â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”‚   â”‚       â””â”€â”€ auth_repository_impl.dart    # Implements IAuthRepository
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ðŸ“ domain/              # Domain Layer (Pure, AgnÃ³stico)
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user_entity.dart             # @freezed
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth_state_entity.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth_repository.dart         # Abstract interface
â”‚   â”‚   â”‚   â””â”€â”€ usecases/
â”‚   â”‚   â”‚       â”œâ”€â”€ login_usecase.dart
â”‚   â”‚   â”‚       â”œâ”€â”€ logout_usecase.dart
â”‚   â”‚   â”‚       â””â”€â”€ refresh_token_usecase.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ðŸ“ presentation/        # Presentation Layer (UI + Logic)
â”‚   â”‚       â”œâ”€â”€ controllers/
â”‚   â”‚       â”‚   â”œâ”€â”€ auth_controller.dart         # @riverpod (state management)
â”‚   â”‚       â”‚   â”œâ”€â”€ login_controller.dart
â”‚   â”‚       â”‚   â””â”€â”€ session_controller.dart      # Global session provider
â”‚   â”‚       â”œâ”€â”€ screens/
â”‚   â”‚       â”‚   â”œâ”€â”€ login_screen.dart            # ConsumerWidget
â”‚   â”‚       â”‚   â”œâ”€â”€ register_screen.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ forgot_password_screen.dart
â”‚   â”‚       â”‚   â””â”€â”€ splash_screen.dart
â”‚   â”‚       â””â”€â”€ widgets/
â”‚   â”‚           â”œâ”€â”€ email_textfield.dart         # Reusable form fields
â”‚   â”‚           â”œâ”€â”€ password_textfield.dart
â”‚   â”‚           â””â”€â”€ auth_error_dialog.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ ðŸ“ documents/               # Feature: Documentos (RAG)
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”‚   â”œâ”€â”€ datasources/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ document_remote_datasource.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ document_model.dart
â”‚   â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”‚   â”‚       â””â”€â”€ document_repository_impl.dart
â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ document_entity.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ document_repository.dart
â”‚   â”‚   â”‚   â””â”€â”€ usecases/
â”‚   â”‚   â”‚       â”œâ”€â”€ upload_document_usecase.dart
â”‚   â”‚   â”‚       â”œâ”€â”€ query_document_usecase.dart
â”‚   â”‚   â”‚       â””â”€â”€ list_documents_usecase.dart
â”‚   â”‚   â””â”€â”€ presentation/
â”‚   â”‚       â”œâ”€â”€ controllers/
â”‚   â”‚       â”‚   â””â”€â”€ document_controller.dart
â”‚   â”‚       â”œâ”€â”€ screens/
â”‚   â”‚       â”‚   â”œâ”€â”€ documents_list_screen.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ document_detail_screen.dart
â”‚   â”‚       â”‚   â””â”€â”€ upload_document_screen.dart
â”‚   â”‚       â””â”€â”€ widgets/
â”‚   â”‚           â”œâ”€â”€ document_card.dart
â”‚   â”‚           â””â”€â”€ search_documents_field.dart
â”‚   â”‚
â”‚   â””â”€â”€ ðŸ“ {{FEATURE}}/             # Nuevo feature (plantilla)
â”‚       â”œâ”€â”€ data/
â”‚       â”œâ”€â”€ domain/
â”‚       â””â”€â”€ presentation/
â”‚
â”œâ”€â”€ ðŸ“ shared/                      # ðŸŒ Global Reusable Widgets & Providers
â”‚   â”œâ”€â”€ ðŸ“ widgets/                 # Componentes reutilizables globales
â”‚   â”‚   â”œâ”€â”€ app_button.dart         # CustomButton (global)
â”‚   â”‚   â”œâ”€â”€ app_text_field.dart     # CustomTextField (global)
â”‚   â”‚   â”œâ”€â”€ app_dialog.dart         # CustomDialog template
â”‚   â”‚   â”œâ”€â”€ error_widget.dart       # Error display (global)
â”‚   â”‚   â”œâ”€â”€ loading_overlay.dart    # Loading spinner (global)
â”‚   â”‚   â””â”€â”€ empty_state_widget.dart # Empty state display (global)
â”‚   â”‚
â”‚   â”œâ”€â”€ ðŸ“ providers/               # Global Riverpod providers
â”‚   â”‚   â”œâ”€â”€ http_client_provider.dart       # Dio HTTP client
â”‚   â”‚   â”œâ”€â”€ shared_preferences_provider.dart # Local storage
â”‚   â”‚   â”œâ”€â”€ connectivity_provider.dart      # Network status
â”‚   â”‚   â””â”€â”€ {{GLOBAL}}_provider.dart
â”‚   â”‚
â”‚   â””â”€â”€ ðŸ“ constants/               # Global constants
â”‚       â”œâ”€â”€ app_constants.dart      # API timeouts, retry counts
â”‚       â””â”€â”€ error_messages.dart     # Error strings (i18n ready)
â”‚
â”œâ”€â”€ ðŸ“ test/                        # ðŸ§ª Test Suite (mirrors src structure)
â”‚   â”œâ”€â”€ ðŸ“ unit/                    # Unit tests (~70%)
â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â”œâ”€â”€ usecases/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ test_login_usecase.dart
â”‚   â”‚   â”‚   â””â”€â”€ entities/
â”‚   â”‚   â”‚       â””â”€â”€ test_user_entity.dart
â”‚   â”‚   â”œâ”€â”€ presentation/
â”‚   â”‚   â”‚   â””â”€â”€ controllers/
â”‚   â”‚   â”‚       â””â”€â”€ test_auth_controller.dart
â”‚   â”‚   â””â”€â”€ data/
â”‚   â”‚       â””â”€â”€ repositories/
â”‚   â”‚           â””â”€â”€ test_auth_repository_impl.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ ðŸ“ integration/             # Integration tests (~20%)
â”‚   â”‚   â”œâ”€â”€ auth_flow_test.dart     # Login â†’ get profile flow
â”‚   â”‚   â””â”€â”€ document_upload_test.dart
â”‚   â”‚
â”‚   â””â”€â”€ ðŸ“ widget_test/             # Widget tests (~10%)
â”‚       â”œâ”€â”€ screens/
â”‚       â”‚   â””â”€â”€ test_login_screen.dart
â”‚       â””â”€â”€ widgets/
â”‚           â””â”€â”€ test_app_button.dart
â”‚
â”œâ”€â”€ ðŸ“„ pubspec.yaml                 # Project metadata & dependencies
â”œâ”€â”€ ðŸ“„ pubspec.lock                 # Locked versions (COMMIT THIS!)
â”œâ”€â”€ ðŸ“„ analysis_options.yaml        # Linter config (very_good_analysis)
â”œâ”€â”€ ðŸ“„ .env.example                 # Environment variables template
â”œâ”€â”€ ðŸ“„ .gitignore                   # Exclude build/, .dart_tool/, .env
â”œâ”€â”€ ðŸ“„ README.md                    # Project documentation
â””â”€â”€ ðŸ“„ Dockerfile                   # Container image (for web/desktop releases)

```

---

## ðŸ“‹ Key Principles

### 1. **Feature-First Organization**
Each feature is self-contained:
- `data/` - API calls, local storage, models (JSON-serializable)
- `domain/` - Business logic, entities, use cases (pure Dart)
- `presentation/` - UI, controllers (Riverpod), widgets

**Benefit:** Scales infinitely. Each feature can be worked on independently.

### 2. **Separation of Concerns (Clean Architecture)**
- **Domain:** Pure Dart, no Flutter, no Riverpod
- **Data:** Repositories implement domain interfaces
- **Presentation:** UI consumes controllers, controllers use repositories

### 3. **Immutability First**
All entities and models use `@freezed` (auto-generated immutable classes).

### 4. **Riverpod for State Management**
- Providers for global state (auth, connectivity)
- AsyncNotifier for async operations (loading/error/data)
- ConsumerWidget to access providers

### 5. **Null Safety**
No `!` operator without 100% guarantee. Use `?` and `??`.

---

## ðŸš€ Generate Folder Structure (Bash)

```bash
# Create directory structure
mkdir -p lib/{core/{config,theme,router,utils,exceptions},features/{auth/{data/{datasources,models,repositories},domain/{entities,repositories,usecases},presentation/{controllers,screens,widgets}},documents/{data/{datasources,models,repositories},domain/{entities,repositories,usecases},presentation/{controllers,screens,widgets}}},shared/{widgets,providers,constants}}

# Create test structure
mkdir -p test/{unit/{domain/{usecases,entities},data/repositories,presentation/controllers},integration,widget_test/{screens,widgets}}

# Create __init__.dart files (optional, not required in Dart)
find lib test -type d -exec touch {}/__init__.dart \; 2>/dev/null || true

# Create essential files
touch lib/main.dart lib/app.dart
touch pubspec.yaml analysis_options.yaml .env.example .gitignore Dockerfile README.md
```

---

## âœ… Validation Checklist

Before committing code:

- [ ] âœ… Feature-first architecture (no lib/models/, lib/screens/)
- [ ] âœ… All classes are `@immutable` or `@freezed`
- [ ] âœ… Tests mirror source structure
- [ ] âœ… `flutter analyze` runs clean
- [ ] âœ… `dart format lib/` applied
- [ ] âœ… No `print()` calls (use logger)
- [ ] âœ… Null-safe: no `!` without justification
- [ ] âœ… Riverpod providers properly typed
- [ ] âœ… Domain layer is pure Dart (no Flutter imports)
- [ ] âœ… BuildContext validated after async operations

---

**Structure Version:** 1.0
**Architecture:** Clean Architecture + Feature-First
**State Management:** Riverpod 2.0
**Last Updated:** 30/01/2026
**Used By:** SoftArchitect AI (Dogfooding âœ¨)
